# Мой план и стадии Канбана

{% if build == 'dev' %}

{% note alert "TO-DO _не выгружается на prod_" %}

- написать, что такое Мой План, как он работает, и дать ссылку на управление стадиями рабочей группы
- нужны правки под стандарт написания

{% endnote %}

{% endif %}

{% note warning "Мы еще обновляем эту страницу" %}

Тут может не хватать некоторых данных — дополним в ближайшее время

{% endnote %}

> Название метода: **task.stages.\***
>
> Scope: [`task`](../../scopes/permissions.md)
>
> Кто может выполнять метод: любой пользователь

## Таблица стадий

#|
|| **Параметр** | **Описание** ||
|| **ID** | Идентификатор стадии ||
|| **TITLE** | Заголовок ||
|| **SORT** | Индекс сортировки (только для чтения) ||
|| **COLOR** | Цвет в формате RGB, пример: FFAAEE. ||
|| **SYSTEM_TYPE** | Системный код, пока может быть или `null`, или `NEW` - означающий, что данная стадия является стадией по умолчанию (только для чтения) ||
|| **ENTITY_TYPE** | Тип сущности, к которой относится стадия (`G` - группа, `U` - пользователь) (только для чтения, а также указывается при добавлении) ||
|| **ENTITY_ID** | ID сущности, к которой относится стадия (группа или пользователь) (только для чтения) ||
|#

## Выборка задач

Выборка задач из стадий осуществляется методом [task.task.get](../tasks-task-get.md). Есть особенности.

1. Выборка из стадий Канбана группы. В массиве фильтра передаем ключ `STAGE_ID` с `ID` нужной вам стадии. Но если вы выбираете задачи из стадии по-умолчанию (она идет первой), вам требуется передать для `STAGE_ID` массив значений, состоящий из `0` и `ID` вашей стадии (`[0, ID]`). Дополнительно надо отфильтровать еще и по группе данную выборку.
2. Выборка из Моего плана. В массиве фильтра передаётся ключ `STAGES_ID` с `ID` нужной вам стадии. Передавать массив значений не требуется.

## Методы

#|
|| **Метод** | **Описание** ||
|| [task.stages.add](./task-stages-add.md) | Метод добавляет стадии Канбана / Моего плана. ||
|| [task.stages.canmovetask](./task-stages-can-move-task.md) | Метод определяет, может ли текущий пользователь перемещать задачи в указанной сущности ||
|| [task.stages.delete](./task-stages-delete.md) | Метод удаляет стадии Канбана / Моего плана. ||
|| [task.stages.get](./task-stages-get.md) | Метод получает стадии Канбана / Моего плана. ||
|| [task.stages.movetask](./task-stages-move-task.md) | Метод перемещает задачи из одной стадии в другую. ||
|| [task.stages.update](./task-stages-update.md) | Метод обновляет стадии Канбана / Моего плана. ||
|#