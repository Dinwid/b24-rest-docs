# Общие принципы работы с пользовательскими полями

{% note warning "Мы еще обновляем эту страницу" %}

Тут может не хватать некоторых данных — дополним в ближайшее время

{% endnote %}

{% if build == 'dev' %}

{% note alert "TO-DO _не выгружается на prod_" %}

- правки под стандарт написания 

{% endnote %}

{% endif %}

Есть несколько правил работы с **пользовательскими полями** для всех сущностей CRM:

1. Для корректного запуска методов, работающих с пользовательскими полями, то есть тех, в названии которых встречается фрагмент **userfield**, следует установить для соответствующей [роли CRM](https://helpdesk.bitrix24.ru/open/6268091/) право доступа "Разрешить изменять настройки".

2. Чтобы в методах, работающих с пользовательскими полями, получить названия полей на текущем языке портала, надо в фильтр добавить:
```
'LANG' => 'ru'
```

3. Для корректного обновления множественных полей, таких как телефон и email, в CRM надо передавать id текущего значения, пример:
```
"PHONE": [ { "ID":245570, "VALUE": "555100501888", "VALUE_TYPE": "WORK" } ],
```

4. Для загрузки файлов используйте такой код:
```
{
    "UF_CRM_1499876148": [
        {"fileData": ["test.txt", "dfgdfgdfgh"]},
        {"fileData": ["test2.txt", "dfgdfgdfgh"]}
    ]
}
```

5. Для удаления картинки из поля, нужно вначале получить ID файла картинки в поле PHOTO методом [crm.contact.get](../../contacts/crm-contact-get.md) и после передать его с параметром remove в метод [crm.contact.update](../../contacts/crm-contact-update.md), как пример, в контакте 308 удаляем фото ID 11062 (REGISTER_SONET_EVENT можно не передавать):
   
```javascript
BX24.callMethod(
    "crm.contact.update",
    {
        id: 33,
        fields:
        {
            "WEB": {"262014":{"ID":"262014","VALUE":""}}
        },
        params: { "REGISTER_SONET_EVENT": "Y" }
    },
    function(result)
    {
        if(result.error())
            console.error(result.error());
        else
        {
            console.info(result.data());
        }
    }
);
```
{% include [Сноска о примерах](../../../../_includes/examples.md) %}